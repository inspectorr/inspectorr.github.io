{"version":3,"sources":["images/logo-combined.png","images/exit.png","components/Waiter/index.js","actions/auth.js","components/Auth/index.js","constants.js","components/Map/Marker/index.js","components/Map/index.js","components/Interface/Frame/index.js","components/Interface/BranchList/index.js","components/Interface/index.js","actions/requestData.js","actions/changeRecord.js","actions/convertData.js","actions/filterData.js","components/App.js","index.js"],"names":["module","exports","__webpack_require__","p","Waiter","react_default","a","createElement","Container","fluid","className","Row","Col","PulseLoader_default","color","size","URL","proxyURL","actions_auth","_x","auth_ref","apply","this","arguments","_callee","user","res","regenerator_default","wrap","_context","prev","next","fetch","method","headers","Content-Type","body","JSON","stringify","sent","abrupt","stop","Auth","state","authFailed","waiting","setState","auth","console","log","status","props","onAuthSuccess","sendAuthRequest","_this2","esm","onSubmit","onFormSubmit","initialValues","field","type","Button","variant","React","Component","CRITICALITY","1","name","colorMuted","2","3","4","default","Marker","applicationsCriticalities","points","forEach","point","applications","application","push","criticality","length","arr","counter","item","maxKey","max","key","getTheMostFrequentValue","N","side","backgroundColor","Container_default","style","height","width","marginTop","marginLeft","Map","clusters","mapOptions","center","defaultProps","zoom","onMapChange","_this","data","createClusters","prevProps","map","cluster","id","lat","lng","lib_default","bootstrapURLKeys","language","region","defaultCenter","defaultZoom","onChange","options","disableDefaultUI","Supercluster","_ref","wx","wy","numPoints","concat","Frame","Col_default","paddingTop","view","FRAME_PY","paddingBottom","paddingRight","FRAME_PX","paddingLeft","onClick","closeFrame","src","recordId","filterTitles","info","selected","BranchList","stopIndex","startIndex","changeFilters","filter","filterData","toggleFilterSelect","index","slice","blurerHeight","hardcodeBlurBottomCorner","canvas","refs","bottomBlurer","ctx","getContext","linGrad","createLinearGradient","addColorStop","fillStyle","fillRect","LIST_WIDTH","filterTitleElements","i","BranchList_FilterTitle","title","remainCount","require","alt","exit","es","rowHeight","rowCount","rowRenderer","_ref2","BranchList_BranchItem","address","openFrame","onRowsRendered","_ref3","ref","hidden","BranchList_RemainInfo","count","RemainInfo","FilterTitle","onMouseDown","e","preventDefault","onDoubleClick","BranchItem","filters","filterItems","BranchList_FilterItem","FilterItem","VIEW","UserInterface","frameOpen","list","BranchList_BranchList","Object","assign","Row_default","Interface_Frame","requestData","_x2","requestData_ref","path","btoa","email","password","changeRecord","_x3","_x4","changeRecord_ref","value","values","geocoder","window","google","maps","Geocoder","convertData","convertData_ref","_callee2","branches","requests","_context2","branch","coords","_coords$split$map","split","_coords$split$map2","slicedToArray","Promise","resolve","reject","geocode","asyncToGenerator","mark","results","_lat","_lng","geometry","location","location_type","all","branchId","filteredData","indexOf","_loop","app","App","authRequired","error","checkAccess","getData","onError","responses","json","Auth_Auth","waiter","Map_Map","content","Interface_UserInterface","App_Err","Err","statusText","ReactDOM","render","App_App","document","getElementById"],"mappings":"6QAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,+DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,uRCKzBC,UAAA,WACb,OACEC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAWC,OAAK,EAACC,UAAU,0CACzBL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAKD,UAAU,0CACbL,EAAAC,EAAAC,cAACK,EAAA,EAAD,KAAKP,EAAAC,EAAAC,cAACM,EAAAP,EAAD,CAAaQ,MAAM,OAAOC,KAAM,2BCNvCC,UAAMC,6EAEGC,EAAA,SAAAC,GAAA,OAAAC,EAAAC,MAAAC,KAAAC,uDAAA,SAAAC,EAAeC,GAAf,IAAAC,EAAA,OAAAC,EAAArB,EAAAsB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACGC,MAAMhB,EAAK,CACzBiB,OAAQ,OACRC,QAAS,CACPC,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUb,KANV,cACTC,EADSG,EAAAU,KAAAV,EAAAW,OAAA,SASNd,GATM,wBAAAG,EAAAY,SAAAjB,iCCGMkB,6MACnBC,MAAQ,CACNC,YAAY,EACZC,SAAS,0HAGWpB,gFACpBH,KAAKwB,SAAS,CAAED,SAAS,aACTE,EAAKtB,UAAjBC,SACJJ,KAAKwB,SAAS,CAAED,SAAS,IAEzBG,QAAQC,IAAIvB,GAEO,MAAfA,EAAIwB,QACN5B,KAAKwB,SAAS,CAAEF,YAAY,IAE5BtB,KAAK6B,MAAMC,cAAc3B,IACD,MAAfC,EAAIwB,QACb5B,KAAKwB,SAAS,CAAEF,YAAY,4IAOnBnB,GACPH,KAAKqB,MAAME,SACfvB,KAAK+B,gBAAgB5B,oCAGd,IAAA6B,EAAAhC,KACP,OACEjB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAWC,OAAK,EAACC,UAAU,4BACzBL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAKD,UAAU,6EACfL,EAAAC,EAAAC,cAACgD,EAAA,EAAD,CACEC,SAAU,SAAA/B,GAAI,OAAI6B,EAAKG,aAAahC,IACpCiC,cAAe,IAKfrD,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,QACbL,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,aAAf,kCACAL,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,cAAaL,EAAAC,EAAAC,cAACgD,EAAA,EAAD,CAAMI,MAAM,QAAQC,KAAK,aAGzDvD,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,QACbL,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,aAAf,wCACAL,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,iBAAgBL,EAAAC,EAAAC,cAACgD,EAAA,EAAD,CAAMI,MAAM,WAAWC,KAAK,gBAG/DvD,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,gBACZY,KAAKqB,MAAMC,WAAa,0IAA8B,IAEzDvC,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,QACbL,EAAAC,EAAAC,cAACsD,EAAA,EAAD,CAAQC,QAAQ,UAAUF,KAAK,UAC5BtC,KAAKqB,MAAME,QAAUxC,EAAAC,EAAAC,cAACM,EAAAP,EAAD,CAAaS,KAAM,EAAGD,MAAO,0BAA6B,6CA1D5DiD,IAAMC,gECR3BC,UAAc,CACzBC,EAAK,CACHC,KAAM,6CACNrD,MAAO,yBACPsD,WAAY,4BAEdC,EAAK,CACHF,KAAM,6CACNrD,MAAO,0BACPsD,WAAY,4BAEdE,EAAK,CACHH,KAAM,uCACNrD,MAAO,yBACPsD,WAAY,4BAEdG,EAAK,CACHJ,KAAM,mDACNrD,MAAO,0BACPsD,WAAY,4BAEdI,QAAW,CACTL,KAAM,oDAENrD,MAAO,wBACPsD,WAAY,8BCHD,IAAAK,EAAA,SAACtB,GACd,IAAMuB,EAA4B,GAClCvB,EAAMwB,OAAOC,QAAQ,SAAAC,GACnBA,EAAMC,aAAaF,QAAQ,SAAAG,GACzBL,EAA0BM,KAAKD,EAAYE,iBAI/C,IAAMA,EAAcP,EAA0BQ,QAzBhD,SAAiCC,GAC/B,IAAMC,EAAU,GAChBD,EAAIP,QAAQ,SAACS,GACXD,EAAQC,GAAQD,EAAQC,KAAUD,EAAQC,GAAQ,IAGpD,IAAIC,EAAQC,EAAM,EAClB,IAAK,IAAIC,KAAOJ,EACVA,EAAQI,GAAOD,IACjBA,EAAMH,EAAQI,GACdF,EAASE,GAIb,OAAOF,EAWiDG,CAAwBf,GAA6B,KAEvGgB,EAAIhB,EAA0BQ,OAChCS,EAAO,GAAO,EAAFD,EACZC,EAAO,MAAKA,EAAO,KAqBvB,IAAMC,EAAkC,OAAhBX,EAAuBhB,EAAYgB,GAAanE,MAAQmD,EAAYO,QAAQJ,WAEpG,OACE/D,EAAAC,EAAAC,cAACsF,EAAAvF,EAAD,CACEI,UAAU,yDACVoF,MAAO,CACLC,OAAQJ,EACRK,MAAOL,EACPM,WAAYN,EAAK,EACjBO,YAAaP,EAAK,EAClBC,oBAGFvF,EAAAC,EAAAC,cAAA,QAAMG,UAAU,SAASgF,KC7DVS,qNASnBxD,MAAQ,CACNyD,SAAU,MAGZC,WAAa,CACXC,OAAQH,EAAII,aAAaD,OACzBE,KAAML,EAAII,aAAaC,QAczBC,YAAc,SAACJ,GACbK,EAAKL,WAAaA,EAClB,IAAIM,EAAOD,EAAKvD,MAAMwD,KAAOD,EAAKvD,MAAMwD,KAAO,GACzCP,EAAWD,EAAIS,eAAeF,EAAKL,WAAYM,GACrDD,EAAK5D,SAAS,CAAEsD,gGAGCS,GAEbA,EAAUF,OAASrF,KAAK6B,MAAMwD,MAAMrF,KAAKmF,YAAYnF,KAAK+E,6CAI9D,IAAMD,EAAW9E,KAAKqB,MAAMyD,SAASU,IAAI,SAAAC,GACvC,OACE1G,EAAAC,EAAAC,cAACkE,EAAD,CACEe,IAAKuB,EAAQC,GACbC,IAAKF,EAAQE,IACbC,IAAKH,EAAQG,IACbvC,OAAQoC,EAAQpC,WAKtB,OACEtE,EAAAC,EAAAC,cAACsF,EAAAvF,EAAD,CAAWG,OAAK,EAACC,UAAU,wBACzBL,EAAAC,EAAAC,cAAC4G,EAAA7G,EAAD,CACE8G,iBAAkB,CAChBC,SAAU,KACVC,OAAQ,MAEVC,cAAepB,EAAII,aAAaD,OAChCkB,YAAarB,EAAII,aAAaC,KAC9BiB,SAAUnG,KAAKmF,YACfiB,QAAS,iBAAO,CACZC,kBAAkB,KAGrBvB,6CAjDaC,EAAYM,GAEhC,OADiBiB,IAAajB,EACvBP,CAASC,GAAYS,IAAI,SAAAe,GAAA,IAAGC,EAAHD,EAAGC,GAAIC,EAAPF,EAAOE,GAAIC,EAAXH,EAAWG,UAAWrD,EAAtBkD,EAAsBlD,OAAtB,MAAoC,CAClEsC,IAAKc,EACLb,IAAKY,EACLE,YACAhB,GAAE,GAAAiB,OAAKD,EAAL,KAAAC,OAAkBtD,EAAO,GAAGqC,IAC9BrC,mBAzB2BZ,IAAMC,YAAlBmC,EACZI,aAAe,CACpBD,OAAQ,CACNW,IAAK,MACLC,IAAK,OAEPV,KAAM,gCCkBK0B,2LAxBX,OACE7H,EAAAC,EAAAC,cAAC4H,EAAA7H,EAAD,CACEI,UAAU,YACVoF,MAAO,CACLsC,WAAY9G,KAAK6B,MAAMkF,KAAKC,SAC5BC,cAAejH,KAAK6B,MAAMkF,KAAKC,SAC/BE,aAAclH,KAAK6B,MAAMkF,KAAKI,SAC9BC,YAAapH,KAAK6B,MAAMkF,KAAKI,WAE/BpI,EAAAC,EAAAC,cAACsF,EAAAvF,EAAD,CAAWG,OAAK,EAACC,UAAU,uBACzBL,EAAAC,EAAAC,cAAA,OAAKG,UAAW,oBACdL,EAAAC,EAAAC,cAAA,OAAKoI,QAASrH,KAAK6B,MAAMyF,WAAYlI,UAAW,gBAAhD,UACAL,EAAAC,EAAAC,cAAA,UACEyF,MAAM,OACND,OAAO,OACP8C,IAAG,oEAAAZ,OAAsE3G,KAAK6B,MAAM2F,SAAjF,4BAjBG/E,IAAMC,6BCCpB+E,EAAe,GACrB,IAAK,IAAIvD,KAAOvB,EACd8E,EAAa/D,KAAK,CAACQ,MAAKwD,KAAM/E,EAAYuB,GAAMyD,UAAU,QAGvCC,6MACnBvG,MAAQ,CACNoG,eACAI,UAAW,KACXC,WAAY,QAGdC,cAAgB,WACd,IAAMC,EAAS,CAACrE,YAAa,IAC7ByB,EAAK/D,MAAMoG,aAAanE,QAAQ,SAACS,GAC3BA,EAAK4D,UAAUK,EAAOrE,YAAYD,KAAKK,EAAKG,OAElDkB,EAAKvD,MAAMoG,WAAWD,MAGxBE,mBAAqB,SAACC,GACpB,IAAMV,EAAerC,EAAK/D,MAAMoG,aAAaW,QAC7CX,EAAaU,GAAOR,UAAYF,EAAaU,GAAOR,SACpDvC,EAAK5D,SAAS,CAACiG,iBACfrC,EAAK2C,mBAOPM,aAAe,sFAHbrI,KAAKsI,8EAML,IAAMC,EAASvI,KAAKwI,KAAKC,aACnBC,EAAMH,EAAOI,WAAW,MACxBC,EAAUF,EAAIG,qBAAqB,EAAG,EAAG,EAAGN,EAAO9D,QACzDmE,EAAQE,aAAa,EAAG,uBACxBF,EAAQE,aAAa,EAAG,yBACxBJ,EAAIK,UAAYH,EAChBF,EAAIM,SAAS,EAAG,EAAGhJ,KAAK6B,MAAMkF,KAAKkC,WAAYV,EAAO9D,yCAG/C,IAAAzC,EAAAhC,KACDkJ,EAAsBlJ,KAAKqB,MAAMoG,aAAajC,IAAI,SAACzB,EAAMoF,GAC7D,OACEpK,EAAAC,EAAAC,cAACmK,EAAD,CACElF,IAAKH,EAAK2D,KAAK7E,KACfwG,MAAOtF,EAAK2D,KAAK7E,KACjBrD,MAAOuE,EAAK2D,KAAKlI,MACjBsD,WAAYiB,EAAK2D,KAAK5E,WACtB6E,SAAU5D,EAAK4D,SACfQ,MAAOgB,EACPjB,mBAAoBlG,EAAKkG,uBAKzBoB,EAActJ,KAAK6B,MAAMwD,KAAKzB,OAAS5D,KAAKqB,MAAMwG,UAAY,EAEpE,OACE9I,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAWE,UAAU,uBAAuBoF,MAAO,CAACE,MAAO1E,KAAK6B,MAAMkF,KAAKkC,aACzElK,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAWE,UAAU,eACnBL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAKD,UAAU,YAAYoF,MAAO,CAACC,OAAQ,KACzC1F,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,wDACdL,EAAAC,EAAAC,cAAA,OAAKwF,OAAQ,GAAI8C,IAAKgC,EAAQ,KAAsCC,IAAI,WAEzEzK,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,2BAA2BiI,QAASrH,KAAK6B,MAAM4H,MAC5D1K,EAAAC,EAAAC,cAAA,OAAKwF,OAAQ,GAAI8C,IAAKgC,EAAQ,SAGlCxK,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,6DAA6D8J,IAE9EnK,EAAAC,EAAAC,cAACyK,EAAA,EAAD,KACG,SAAAnD,GAAA,IAAG9B,EAAH8B,EAAG9B,OAAQC,EAAX6B,EAAW7B,MAAX,OACC3F,EAAAC,EAAAC,cAACyK,EAAA,EAAD,CACEC,UAAW,GACXC,SAAU5H,EAAKH,MAAMwD,KAAKzB,OAC1BiG,YAAa,SAAAC,GAAA,IAAG3B,EAAH2B,EAAG3B,MAAOjE,EAAV4F,EAAU5F,IAAKM,EAAfsF,EAAetF,MAAf,OACTzF,EAAAC,EAAAC,cAAA,OAAKiF,IAAKA,EAAKM,MAAOA,GACpBzF,EAAAC,EAAAC,cAAC8K,EAAD,CACErE,GAAI1D,EAAKH,MAAMwD,KAAK8C,GAAOzC,GAC3B7C,KAAMb,EAAKH,MAAMwD,KAAK8C,GAAO6B,QAC7BxG,aAAcxB,EAAKH,MAAMwD,KAAK8C,GAAO3E,aACrCyG,UAAWjI,EAAKH,MAAMoI,cAI9BC,eAAgB,SAAAC,GAAA,IAAErC,EAAFqC,EAAErC,WAAYD,EAAdsC,EAActC,UAAd,OAA6B7F,EAAKR,SAAS,CAACsG,aAAYD,eACxEpD,OAAQA,EAAO,KAAK6E,EAAc,EAAI,GAAK,GAC3C5E,MAAOA,MAIb3F,EAAAC,EAAAC,cAAA,UAAQG,UAAW,qBAAsBgL,IAAK,eAAgBC,OAAQf,GAAa,EAAG7E,OAAQzE,KAAKqI,aAAc3D,MAAO1E,KAAK6B,MAAMkF,KAAKkC,WAAW,IACnJlK,EAAAC,EAAAC,cAACqL,EAAD,CAAYC,MAAOjB,YA1Fa7G,IAAMC,WAgGxC8H,EAAa,SAAC3I,GAClB,OAAOA,EAAM0I,MAAQ,EAAKxL,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,6BAA6BoF,MAAO,CAACC,OAAQ,KAA5D,6BAAAkC,OACd9E,EAAM0I,MADQ,yDAEhB,MAGNE,EAAc,SAAC5I,GACnB,OACE9C,EAAAC,EAAAC,cAACK,EAAA,EAAD,CACEoL,YAAa,SAACC,GAAD,OAAOA,EAAEC,kBACtBC,cAAe,SAACF,GAAD,OAAOA,EAAEC,kBACxBvD,QAAS,WACPxF,EAAMqG,mBAAmBrG,EAAMsG,QAEjC/I,UAAU,iDAEVL,EAAAC,EAAAC,cAAA,OAAKuF,MAAO,CAACF,gBAAiBzC,EAAM8F,SAAW9F,EAAMiB,WAAa,KAAMtD,MAAOqC,EAAMrC,OAAQJ,UAAU,gBAAgByC,EAAMwH,SAK7HyB,EAAa,SAACjJ,GAClB,IAAMkJ,EAAU,GAChBlJ,EAAM2B,aAAaF,QAAQ,SAACtE,GAC1B+L,EAAQ/L,EAAE2E,aAAeoH,EAAQ/L,EAAE2E,aAAeoH,EAAQ/L,EAAE2E,eAAiB,IAG/E,IAAMqH,EAAc,GACpB,IAAK,IAAI9G,KAAO6G,EACdC,EAAYtH,KAAK3E,EAAAC,EAAAC,cAACgM,EAAD,CAAY/G,IAAKA,EAAKqG,MAAOQ,EAAQ7G,GAAMpB,WAAYH,EAAYuB,GAAKpB,WAAYtD,MAAOmD,EAAYuB,GAAK1E,SAG/H,OACET,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAWE,UAAU,YACnBL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CACED,UAAU,wCACViI,QAAS,kBAAMxF,EAAMoI,UAAUpI,EAAM6D,MAErC3G,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAK+J,MAAOxH,EAAMgB,KAAMzD,UAAU,8BAC/ByC,EAAMgB,MAERmI,KAMHE,EAAa,SAACrJ,GAClB,OACE9C,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAKF,UAAU,2CAA2CoF,MAAO,CAACF,gBAAiBzC,EAAMiB,WAAYtD,MAAOqC,EAAMrC,QAASqC,EAAM0I,0BCjJ/HY,EAAO,CAAClC,WAHK,IAGO9B,SAFT,GAEmBH,SADnB,IAGIoE,6MACnB/J,MAAQ,CACNgK,WAAW,EACX7D,SAAU,QAGZyC,UAAY,SAACzC,GACXpC,EAAK5D,SAAS,CAAC6J,WAAW,EAAM7D,gBAGlCF,WAAa,WACXlC,EAAK5D,SAAS,CAAC6J,WAAW,EAAO7D,SAAU,gFAI3C,IAAM8D,EAAOvM,EAAAC,EAAAC,cAACsM,EAADC,OAAAC,OAAA,CAAYvH,IAAI,QAAWlE,KAAK6B,MAAhC,CAAuCwD,KAAMrF,KAAK6B,MAAMwD,KAAKsB,OAAO3G,KAAK6B,MAAMwD,MAAMsB,OAAO3G,KAAK6B,MAAMwD,MAAMsB,OAAO3G,KAAK6B,MAAMwD,MAAMsB,OAAO3G,KAAK6B,MAAMwD,MAAMsB,OAAO3G,KAAK6B,MAAMwD,MAAMsB,OAAO3G,KAAK6B,MAAMwD,MAAO4E,UAAWjK,KAAKiK,UAAWlD,KAAMoE,KAY5P,OAVgBnL,KAAKqB,MAAMgK,UACxBtM,EAAAC,EAAAC,cAACsF,EAAAvF,EAAD,CAAWG,OAAK,EAACC,UAAU,iCAC1BL,EAAAC,EAAAC,cAACyM,EAAA1M,EAAD,CAAKI,UAAU,uBACbL,EAAAC,EAAAC,cAAC0M,EAAD,CAAOzH,IAAI,QAAQoD,WAAYtH,KAAKsH,WAAYE,SAAUxH,KAAKqB,MAAMmG,SAAUT,KAAMoE,IACpFG,IAIJvM,EAAAC,EAAAC,cAAA,OAAKG,UAAU,wCAAwCkM,UAzBnB7I,IAAMC,WCX3ChD,EAAMC,wEAEGiM,EAAA,SAAA/L,EAAAgM,GAAA,OAAAC,EAAA/L,MAAAC,KAAAC,uDAAA,SAAAC,EAAe6L,EAAM5L,GAArB,IAAAS,EAAAR,EAAA,OAAAC,EAAArB,EAAAsB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACTG,EAAU,CACZC,eAAgB,oBAIdV,IAAMS,EAAO,cAAoB,SAAWoL,KAAI,GAAArF,OAAIxG,EAAK8L,MAAT,KAAAtF,OAAkBxG,EAAK+L,YAN9D3L,EAAAE,KAAA,EAQGC,MAAMhB,EAAMqM,EAAM,CAChCpL,OAAQ,MACRC,YAVW,cAQTR,EARSG,EAAAU,KAAAV,EAAAW,OAAA,SAaNd,GAbM,wBAAAG,EAAAY,SAAAjB,2CCFTR,GAAMC,wEAEGwM,GAAA,SAAAtM,EAAAgM,EAAAO,EAAAC,GAAA,OAAAC,GAAAvM,MAAAC,KAAAC,yDAAA,SAAAC,EAAgB6L,EAAM1J,EAAOkK,EAAOpM,GAApC,IAAAS,EAAAE,EAAAV,EAAA,OAAAC,EAAArB,EAAAsB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACTG,EAAU,CACZC,eAAgB,oBAGdV,IAAMS,EAAO,cAAoB,SAAWoL,KAAI,GAAArF,OAAIxG,EAAK8L,MAAT,KAAAtF,OAAkBxG,EAAK+L,aAErEpL,EAAO,CACX0L,OAAQ,KAGLA,OAAOnK,GAASkK,EAXRhM,EAAAE,KAAA,EAaGC,MAAMhB,GAAMqM,EAAM,CAChCpL,OAAQ,QACRC,UACAE,KAAMC,KAAKC,UAAUF,KAhBV,cAaTV,EAbSG,EAAAU,KAAAV,EAAAW,OAAA,SAmBNd,GAnBM,wBAAAG,EAAAY,SAAAjB,6BCFf,IACMuM,GAAW,IADJC,OAAOC,OAAOC,KACDC,SAEXC,GAAA,SAAAjN,EAAAgM,GAAA,OAAAkB,GAAAhN,MAAAC,KAAAC,yDAAA,SAAA+M,EAAgB3H,EAAMlF,GAAtB,IAAA8M,EAAAC,EAAA7J,EAAAa,EAAA,OAAA7D,EAAArB,EAAAsB,KAAA,SAAA6M,GAAA,cAAAA,EAAA3M,KAAA2M,EAAA1M,MAAA,cACbiB,QAAQC,IAAI0D,GACN4H,EAAW,GACXC,EAAW,GACjB7H,EAAK4H,SAAS3J,QAAQ,SAAC8J,GACrB,IAAM1H,EAAK0H,EAAO1H,GACZsE,EAAUoD,EAAOZ,OAAO,GACxBa,EAASD,EAAOZ,OAAO,IACvBhJ,EAAe,GAErB,GAAI6J,EAAJ,CAAY,IAAAC,EACSD,EAAOE,MAAM,KAAK/H,IAAI,SAAAxG,GAAC,OAAKA,IADrCwO,EAAAhC,OAAAiC,GAAA,EAAAjC,CAAA8B,EAAA,GACH3H,EADG6H,EAAA,GACE5H,EADF4H,EAAA,GAEVP,EAASvH,GAAM,CAACsE,UAASrE,MAAKC,MAAKpC,qBAIrC0J,EAASxJ,KAAK,IAAIgK,QAAQ,SAACC,EAASC,GAClCnB,GAASoB,QAAQ,CAAC7D,QAAWA,EAAShE,OAAU,MAAhD,eAAA8D,EAAA0B,OAAAsC,EAAA,EAAAtC,CAAAnL,EAAArB,EAAA+O,KAAuD,SAAA7N,EAAO8N,EAASpM,GAAhB,IAAAqM,EAAAC,EAAA5L,EAAAlC,EAAA,OAAAC,EAAArB,EAAAsB,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACtC,OAAXmB,EADiD,CAAArB,EAAAE,KAAA,YAE7CkF,EAAMqI,EAAQ,GAAGG,SAASC,SAASzI,MACnCC,EAAMoI,EAAQ,GAAGG,SAASC,SAASxI,MAE5B,aADPtD,EAAO0L,EAAQ,GAAGG,SAASE,gBACE,uBAAT/L,EALyB,CAAA/B,EAAAE,KAAA,gBAOjDwM,EAASvH,GAAM,CAACsE,UAASrE,MAAKC,MAAKpC,gBAPcjD,EAAAE,KAAA,EAQ/B0L,GAAY,wBAAAxF,OAAyBjB,GAAM,KAA/B,GAAAiB,OAAwChB,EAAxC,KAAAgB,OAA+Cf,GAAOzF,GARnC,OAQ3CC,EAR2CG,EAAAU,KASjDS,QAAQC,IAAIqI,EAAS,oBAAqB5J,EAAIwB,QATGrB,EAAAE,KAAA,iBAWjDiB,QAAQC,IAAI,qBAAuBqI,EAAU,gBAAiBtE,GAXb,QAAAnF,EAAAE,KAAA,iBAcnDiB,QAAQC,IAAI,UAAWqI,EAASpI,GAdmB,QAgBrD+L,IAhBqD,yBAAApN,EAAAY,SAAAjB,MAAvD,gBAAAkM,EAAAC,GAAA,OAAAvC,EAAA/J,MAAAC,KAAAC,YAAA,SAjBSkN,EAAA1M,KAAA,EAsCPiN,QAAQY,IAAIpB,GAtCL,OAgDb,IAAShJ,KARTmB,EAAK7B,aAAaF,QAAQ,SAACG,GACzB,IAAM8K,EAAW9K,EAAY+I,OAAO,GAAG,GAAGhF,SACpC5F,GAAU6B,EAAY+I,OAAO,GAAG,GAChC7I,GAAeF,EAAY+I,OAAO,IAAI,GACxCS,EAASsB,IAAWtB,EAASsB,GAAU/K,aAAaE,KAAK,CAAC9B,SAAQ+B,kBAGlEN,EAAS,GACC4J,EACdA,EAAS/I,GAAKwB,GAAKxB,EACnBb,EAAOK,KAAKuJ,EAAS/I,IAlDV,OAAAiJ,EAAAjM,OAAA,SAqDNmC,GArDM,yBAAA8J,EAAAhM,SAAA6L,6BCLA,SAAS/E,GAAW5C,EAAM2C,GAGvC,IAAMwG,EAAe,GAwBrB,OAtBAnJ,EAAK/B,QAAQ,SAAAS,GACX,IAAMP,EAAe,GAErB,GAAKO,EAAKP,aAAaI,UAAWoE,EAAOrE,YAAY8K,QAAQ,WAA7D,CAHmB,IAAAC,EAAA,SAQVxK,GACPH,EAAKP,aAAaF,QAAQ,SAAAqL,IAEnB3G,EAAO9D,GAAKuK,QAAQ,GAAGE,EAAIzK,KAAOV,EAAaE,KAAKiL,MAH7D,IAAK,IAAIzK,KAAO8D,EAAQ0G,EAAfxK,GAOLV,EAAaI,UACfG,EAAOyH,OAAOC,OAAO,GAAI1H,IACpBP,aAAeA,EACpBgL,EAAa9K,KAAKK,SAdlByK,EAAa9K,KAAK8H,OAAOC,OAAO,GAAI1H,MAkBjCyK,oBCdYI,8MACnBvN,MAAQ,CACNwN,cAAc,EACdC,OAAO,EACPvN,SAAS,EACT8D,KAAM,KACNmJ,aAAc,QAahB/E,KAAO,WACLrE,EAAK5D,SAAS,CACZqN,cAAc,EACdxJ,KAAM,KACNmJ,aAAc,UA+ClBvG,WAAa,SAACD,GACZ5C,EAAK5D,SAAS,CACZgN,aAAcvG,GAAW7C,EAAK/D,MAAMgE,KAAM2C,IACzC,kBAAMtG,QAAQC,IAAI,iBAAkByD,EAAK/D,MAAMmN,oGAzDlDxO,KAAK+O,oDAWO5O,GACZH,KAAKgP,QAAQ7O,8JAIbH,KAAKwB,SAAS,CAAED,SAAS,aACPqK,EAAY,WACX,OADbxL,UACEwB,OACN5B,KAAK8B,gBACmB,MAAf1B,EAAIwB,OACb5B,KAAKwB,SAAS,CAAED,SAAS,IAEzBvB,KAAKiP,QAAQ7O,6KAIHD,oFACZA,EAAOqL,OAAOC,OAAO,GAAItL,GACzBH,KAAKwB,SAAS,CAAED,SAAS,aAGPqK,EAAY,uBAAwBzL,sCAChCyL,EAAY,uBAAwBzL,sBAFpD+O,GACJjC,cACAzJ,iCAGc0L,qDAAPhL,aACuB,MAA1BgL,EAAUhL,GAAKtC,yCAAuCsN,EAAUhL,GAAKiL,eAAtCD,EAAUhL,yCAE3ClE,KAAKiP,QAAQC,EAAUhL,wEAKR4I,GAAYoC,EAAW/O,WAApCkF,SAENrF,KAAKwB,SAAS,CAAEqN,cAAc,EAAOxJ,OAAMmJ,aAAcnJ,EAAM9D,SAAS,IACxEG,QAAQC,IAAI,QAAS3B,KAAKqB,MAAMgE,0IAG1BjF,GACNJ,KAAKwB,SAAS,CAAEsN,MAAO1O,qCAShB,IAAA4B,EAAAhC,KACDyB,GAAQzB,KAAKqB,MAAME,SAAWvB,KAAKqB,MAAMwN,aAAe9P,EAAAC,EAAAC,cAACmQ,EAAD,CAAMlL,IAAI,OAAOpC,cAAe,SAAC3B,GAAD,OAAU6B,EAAKF,cAAc3B,MAAW,KAChIkP,EAASrP,KAAKqB,MAAME,QAAUxC,EAAAC,EAAAC,cAACH,EAAD,CAAQoF,IAAI,WAAa,KACvDsB,EAAMzG,EAAAC,EAAAC,cAACqQ,EAAD,CAAKpL,IAAI,MAAMmB,KAAMrF,KAAKqB,MAAMmN,eAGxCe,EAAU,CAACF,EAAQ5N,EAFZzB,KAAKqB,MAAMmN,aAAezP,EAAAC,EAAAC,cAACuQ,EAAD,CAAWtL,IAAI,YAAYmB,KAAMrF,KAAKqB,MAAMmN,aAAcvG,WAAYjI,KAAKiI,WAAYwB,KAAMzJ,KAAKyJ,OAAU,KAEhHjE,GAGjC,OAFIxF,KAAKqB,MAAMyN,QAAOS,EAAUxQ,EAAAC,EAAAC,cAACwQ,GAAD,CAAKrP,IAAKJ,KAAKqB,MAAMyN,SAE9CS,SArFsB7M,aAyF3BgN,GAAM,SAAC7N,GACX,OACE9C,EAAAC,EAAAC,cAAA,cAAA0H,OAAS9E,EAAMzB,IAAIwB,OAAnB,KAAA+E,OAA6B9E,EAAMzB,IAAIuP,cCpG3CC,IAASC,OAAO9Q,EAAAC,EAAAC,cAAC6Q,GAAD,MAASC,SAASC,eAAe","file":"static/js/main.05d2a884.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo-combined.4f7ebe9c.png\";","module.exports = __webpack_public_path__ + \"static/media/exit.dd457aba.png\";","import React from 'react';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\nimport PulseLoader from 'react-spinners/PulseLoader';\r\nimport './style.css';\r\n\r\nexport default () => {\r\n  return (\r\n    <Container fluid className=\"waiter h-100 w-100 p-0 m-0 text-center\">\r\n      <Row className=\"h-100 w-100 p-0 m-0 align-items-center\">\r\n        <Col><PulseLoader color=\"gray\" size={10}/></Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n","const proxyURL = 'https://cors-anywhere.herokuapp.com/';\r\n// const proxyURL = '';\r\nconst targetURL = 'https://megapolis.bpium.ru/auth/login';\r\nconst URL = proxyURL + targetURL;\r\n\r\nexport default async function(user) {\r\n  let res = await fetch(URL, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(user),\r\n  });\r\n\r\n  return res;\r\n}\r\n","import React from 'react';\r\nimport { Form, Text } from 'informed';\r\nimport { Container, Row, Col, Button } from 'react-bootstrap';\r\nimport PulseLoader from 'react-spinners/PulseLoader';\r\nimport './style.css';\r\n\r\nimport auth from '../../actions/auth.js';\r\n\r\nexport default class Auth extends React.Component {\r\n  state = {\r\n    authFailed: false,\r\n    waiting: false,\r\n  }\r\n\r\n  async sendAuthRequest(user) {\r\n    this.setState({ waiting: true });\r\n    let res = await auth(user);\r\n    this.setState({ waiting: false });\r\n\r\n    console.log(res);\r\n\r\n    if (res.status === 200) {\r\n      this.setState({ authFailed: false });\r\n      // this.props.onAuthSuccess();\r\n      this.props.onAuthSuccess(user);\r\n    } else if (res.status === 401) {\r\n      this.setState({ authFailed: true });\r\n    } else {\r\n      // вывести ошибку и выйти\r\n    }\r\n\r\n  }\r\n\r\n  onFormSubmit(user) {\r\n    if (this.state.waiting) return;\r\n    this.sendAuthRequest(user);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Container fluid className=\"auth h-100 w-100 p-0 m-0\">\r\n        <Row className=\"flex-column h-100 w-100 p-0 m-0 align-items-center justify-content-center\">\r\n        <Form\r\n          onSubmit={user => this.onFormSubmit(user)}\r\n          initialValues={{\r\n            // email: \"hmrfins@gmail.com\",\r\n            // password: \"hmrfbfacke\",\r\n          }}\r\n        >\r\n          <Col className=\"px-0\">\r\n            <label>\r\n              <Col className=\"px-0 mb-1\">Логин</Col>\r\n              <Col className=\"email px-0\"><Text field=\"email\" type=\"email\"/></Col>\r\n            </label>\r\n          </Col>\r\n          <Col className=\"px-0\">\r\n            <label>\r\n              <Col className=\"px-0 mb-1\">Пароль</Col>\r\n              <Col className=\"password px-0\"><Text field=\"password\" type=\"password\"/></Col>\r\n            </label>\r\n          </Col>\r\n          <Col className=\"warning px-0\">\r\n            {this.state.authFailed ? 'Неверный логин или пароль' : ''}\r\n          </Col>\r\n          <Col className=\"px-0\">\r\n            <Button variant=\"success\" type=\"submit\">\r\n              {this.state.waiting ? <PulseLoader size={7} color={'rgba(255,255,255,0.7)'}/> : 'Войти'}\r\n            </Button>\r\n          </Col>\r\n        </Form>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","export const CRITICALITY = {\r\n  \"1\": {\r\n    name: \"Высокая\",\r\n    color: 'rgba(203, 60, 62, 0.8)',\r\n    colorMuted: 'rgba(240, 201, 202, 0.8)',\r\n  },\r\n  \"2\": {\r\n    name: \"Средняя\",\r\n    color: 'rgba(255, 147, 15, 0.8)',\r\n    colorMuted: 'rgba(255, 226, 190, 0.8)',\r\n  },\r\n  \"3\": {\r\n    name: \"Низкая\",\r\n    color: 'rgba(81, 175, 43, 0.8)',\r\n    colorMuted: 'rgba(208, 251, 191, 0.8)',\r\n  },\r\n  \"4\": {\r\n    name: \"Плановая\",\r\n    color: 'rgba(84, 213, 255, 0.8)',\r\n    colorMuted: 'rgba(213, 245, 255, 0.8)',\r\n  },\r\n  \"default\": {\r\n    name: \"В порядке\",\r\n    // color: 'rgba(81, 175, 43, 0.8)',\r\n    color: 'rgba(99, 99, 99, 0.7)',\r\n    colorMuted: 'rgba(200, 200, 200, 0.7)',\r\n  },\r\n};\r\n","import React from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport './style.css';\r\nimport { CRITICALITY } from '../../../constants.js';\r\n\r\nfunction getTheMostFrequentValue(arr) {\r\n  const counter = {};\r\n  arr.forEach((item) => {\r\n    counter[item] ? counter[item]++ : counter[item] = 1;\r\n  });\r\n\r\n  let maxKey, max = 0;\r\n  for (let key in counter) {\r\n    if (counter[key] > max) {\r\n      max = counter[key];\r\n      maxKey = key;\r\n    }\r\n  }\r\n\r\n  return maxKey;\r\n}\r\n\r\nexport default (props) => {\r\n  const applicationsCriticalities = [];\r\n  props.points.forEach(point => {\r\n    point.applications.forEach(application => {\r\n      applicationsCriticalities.push(application.criticality);\r\n    });\r\n  });\r\n\r\n  const criticality = applicationsCriticalities.length ? +getTheMostFrequentValue(applicationsCriticalities) : null;\r\n\r\n  const N = applicationsCriticalities.length;\r\n  let side = 20 + N*2;\r\n  if (side > 100) side = 100;\r\n\r\n  // let backgroundColor;\r\n  // switch (criticality) {\r\n  //   case 1:\r\n  //     backgroundColor = 'rgba(186, 57, 57, 0.8)';\r\n  //     break;\r\n  //   case 2:\r\n  //     backgroundColor = 'rgba(23, 217, 150, 0.8)';\r\n  //     break;\r\n  //   case 3:\r\n  //     backgroundColor = 'rgba(81, 175, 43, 0.8)';\r\n  //     break;\r\n  //   case 4:\r\n  //     backgroundColor = 'rgba(84, 213, 255, 0.8)';\r\n  //     break;\r\n  //   default:\r\n  //     backgroundColor = 'rgba(81, 175, 43, 0.8)';\r\n  //     break;\r\n  // }\r\n\r\n  const backgroundColor = criticality !== null ? CRITICALITY[criticality].color : CRITICALITY.default.colorMuted;\r\n\r\n  return (\r\n    <Container\r\n      className=\"cluster px-0 justify-content-center align-items-center\"\r\n      style={{\r\n        height: side,\r\n        width: side,\r\n        marginTop: -side/2,\r\n        marginLeft: -side/2,\r\n        backgroundColor,\r\n      }}\r\n    >\r\n      <span className=\"title\">{N}</span>\r\n    </Container>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport GoogleMapReact from 'google-map-react';\r\nimport Supercluster from 'points-cluster';\r\nimport Marker from './Marker';\r\nimport Container from 'react-bootstrap/Container';\r\nimport './style.css';\r\n\r\nexport default class Map extends React.Component {\r\n  static defaultProps = {\r\n    center: {\r\n      lat: 61.25,\r\n      lng: 73.38\r\n    },\r\n    zoom: 4\r\n  };\r\n\r\n  state = {\r\n    clusters: [],\r\n  };\r\n\r\n  mapOptions = {\r\n    center: Map.defaultProps.center,\r\n    zoom: Map.defaultProps.zoom,\r\n  };\r\n\r\n  static createClusters(mapOptions, data) {\r\n    const clusters = Supercluster(data);\r\n    return clusters(mapOptions).map(({ wx, wy, numPoints, points }) => ({\r\n      lat: wy,\r\n      lng: wx,\r\n      numPoints,\r\n      id: `${numPoints}_${points[0].id}`,\r\n      points,\r\n    }));\r\n  }\r\n\r\n  onMapChange = (mapOptions) => {\r\n    this.mapOptions = mapOptions;\r\n    let data = this.props.data ? this.props.data : [];\r\n    const clusters = Map.createClusters(this.mapOptions, data);\r\n    this.setState({ clusters });\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    // console.log(prevProps.data, this.props.data);\r\n    if (prevProps.data !== this.props.data) this.onMapChange(this.mapOptions);\r\n  }\r\n\r\n  render() {\r\n    const clusters = this.state.clusters.map(cluster => {\r\n      return (\r\n        <Marker\r\n          key={cluster.id}\r\n          lat={cluster.lat}\r\n          lng={cluster.lng}\r\n          points={cluster.points}\r\n        />\r\n      );\r\n    });\r\n\r\n    return (\r\n      <Container fluid className=\"map h-100 w-100 px-0\">\r\n        <GoogleMapReact\r\n          bootstrapURLKeys={{\r\n            language: 'ru',\r\n            region: 'ru',\r\n          }}\r\n          defaultCenter={Map.defaultProps.center}\r\n          defaultZoom={Map.defaultProps.zoom}\r\n          onChange={this.onMapChange}\r\n          options={() => ({\r\n              disableDefaultUI: true,\r\n          })}\r\n        >\r\n          {clusters}\r\n        </GoogleMapReact>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport './style.css';\r\n\r\nclass Frame extends React.Component {\r\n  render() {\r\n    return (\r\n      <Col\r\n        className=\"Frame m-0\"\r\n        style={{\r\n          paddingTop: this.props.view.FRAME_PY,\r\n          paddingBottom: this.props.view.FRAME_PY,\r\n          paddingRight: this.props.view.FRAME_PX,\r\n          paddingLeft: this.props.view.FRAME_PX\r\n        }}>\r\n        <Container fluid className=\"p-0 m-0 h-100 w-100\">\r\n          <div className={'iframe-container'}>\r\n            <div onClick={this.props.closeFrame} className={'close-button'}>✕</div>\r\n            <iframe\r\n              width='100%'\r\n              height='100%'\r\n              src={`https://megapolis.bpium.ru/?action=record-open&catalog=12&record=${this.props.recordId}&screen=full`}\r\n            />\r\n          </div>\r\n        </Container>\r\n      </Col>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Frame;\r\n","import React from 'react';\r\nimport {Container, Row, Col} from 'react-bootstrap';\r\nimport { CRITICALITY } from '../../../constants.js';\r\nimport './style.css';\r\nimport {AutoSizer, List} from \"react-virtualized\";\r\n\r\nconst filterTitles = [];\r\nfor (let key in CRITICALITY) {\r\n  filterTitles.push({key, info: CRITICALITY[key], selected: true});\r\n}\r\n\r\nexport default class BranchList extends React.Component {\r\n  state = {\r\n    filterTitles,\r\n    stopIndex: null,\r\n    startIndex: null,\r\n  };\r\n\r\n  changeFilters = () => {\r\n    const filter = {criticality: []};\r\n    this.state.filterTitles.forEach((item) => {\r\n      if (item.selected) filter.criticality.push(item.key);\r\n    });\r\n    this.props.filterData(filter);\r\n  };\r\n\r\n  toggleFilterSelect = (index) => {\r\n    const filterTitles = this.state.filterTitles.slice();\r\n    filterTitles[index].selected = !filterTitles[index].selected;\r\n    this.setState({filterTitles});\r\n    this.changeFilters();\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.hardcodeBlurBottomCorner();\r\n  }\r\n\r\n  blurerHeight = 10;\r\n\r\n  hardcodeBlurBottomCorner() {\r\n    const canvas = this.refs.bottomBlurer;\r\n    const ctx = canvas.getContext('2d');\r\n    const linGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\r\n    linGrad.addColorStop(0, 'rgba(255,255,255,0)');\r\n    linGrad.addColorStop(1, 'rgba(255,255,255,0.8)');\r\n    ctx.fillStyle = linGrad;\r\n    ctx.fillRect(0, 0, this.props.view.LIST_WIDTH, canvas.height);\r\n  }\r\n\r\n  render() {\r\n    const filterTitleElements = this.state.filterTitles.map((item, i) => {\r\n      return (\r\n        <FilterTitle\r\n          key={item.info.name}\r\n          title={item.info.name}\r\n          color={item.info.color}\r\n          colorMuted={item.info.colorMuted}\r\n          selected={item.selected}\r\n          index={i}\r\n          toggleFilterSelect={this.toggleFilterSelect}\r\n        />\r\n      );\r\n    });\r\n\r\n    const remainCount = this.props.data.length - this.state.stopIndex - 1;\r\n\r\n    return (\r\n      <Container className=\"List h-100 px-0 mx-0\" style={{width: this.props.view.LIST_WIDTH}}>\r\n        <Container className=\"list-header\">\r\n          <Row className=\"px-3 pt-3\" style={{height: 40}}>\r\n            <Col className=\"d-flex flex-grow-1 p-0 logo-image align-items-center\">\r\n             <img height={22} src={require(\"../../../images/logo-combined.png\")} alt=\"BPIUM\"/>\r\n            </Col>\r\n            <Col className=\"exit p-0 m-0 flex-grow-0\" onClick={this.props.exit}>\r\n              <img height={20} src={require('../../../images/exit.png')}/>\r\n            </Col>\r\n          </Row>\r\n          <Col className=\"d-flex flex-wrap px-0 mx-0 pb-2 pt-3 align-content-center\">{filterTitleElements}</Col>\r\n        </Container>\r\n        <AutoSizer>\r\n          {({ height, width }) => (\r\n            <List\r\n              rowHeight={40}\r\n              rowCount={this.props.data.length}\r\n              rowRenderer={({ index, key, style}) => (\r\n                  <div key={key} style={style}>\r\n                    <BranchItem\r\n                      id={this.props.data[index].id}\r\n                      name={this.props.data[index].address}\r\n                      applications={this.props.data[index].applications}\r\n                      openFrame={this.props.openFrame}\r\n                    />\r\n                  </div>\r\n              )}\r\n              onRowsRendered={({startIndex, stopIndex}) => this.setState({startIndex, stopIndex})}\r\n              height={height-130-(remainCount > 0 ? 30 : 0)}\r\n              width={width}\r\n            />\r\n          )}\r\n        </AutoSizer>\r\n        <canvas className={'blur-bottom-corner'} ref={'bottomBlurer'} hidden={remainCount<=0} height={this.blurerHeight} width={this.props.view.LIST_WIDTH-4}></canvas>\r\n        <RemainInfo count={remainCount}/>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nconst RemainInfo = (props) => {\r\n  return props.count > 0 ? (<Col className=\"remain-info w-100 px-3 m-0\" style={{height: 30}}>\r\n    {`и еще ${props.count} объектов...`}\r\n  </Col>) : null;\r\n};\r\n\r\nconst FilterTitle = (props) => {\r\n  return (\r\n    <Col\r\n      onMouseDown={(e) => e.preventDefault()}\r\n      onDoubleClick={(e) => e.preventDefault()}\r\n      onClick={() => {\r\n        props.toggleFilterSelect(props.index);\r\n      }}\r\n      className=\"d-flex flex-wrap flex-grow-0 px-0 text-center\"\r\n    >\r\n      <div style={{backgroundColor: props.selected ? props.colorMuted : null, color: props.color}} className=\"filter-title\">{props.title}</div>\r\n    </Col>\r\n  );\r\n};\r\n\r\nconst BranchItem = (props) => {\r\n  const filters = {};\r\n  props.applications.forEach((a) => {\r\n    filters[a.criticality] = filters[a.criticality] ? filters[a.criticality]++ : 1;\r\n  });\r\n\r\n  const filterItems = [];\r\n  for (let key in filters) {\r\n    filterItems.push(<FilterItem key={key} count={filters[key]} colorMuted={CRITICALITY[key].colorMuted} color={CRITICALITY[key].color}/>);\r\n  }\r\n\r\n  return (\r\n    <Container className=\"p-0 mx-0\">\r\n      <Row\r\n        className=\"list-item px-3 m-0 align-items-center\"\r\n        onClick={() => props.openFrame(props.id)}\r\n      >\r\n        <Col title={props.name} className=\"flex-grow-1 name px-0 mx-0\">\r\n          {props.name}\r\n        </Col>\r\n        {filterItems}\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst FilterItem = (props) => {\r\n  return (\r\n    <Col className=\"flex-grow-0 filter-item px-0 text-center\" style={{backgroundColor: props.colorMuted, color: props.color}}>{props.count}</Col>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport './style.css';\r\n\r\nimport Frame from './Frame';\r\nimport BranchList from './BranchList';\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\n\r\nconst LIST_WIDTH = 350;\r\nconst FRAME_PX = 70;\r\nconst FRAME_PY = 30;\r\nconst VIEW = {LIST_WIDTH, FRAME_PX, FRAME_PY};\r\n\r\nexport default class UserInterface extends React.Component {\r\n  state = {\r\n    frameOpen: false,\r\n    recordId: null,\r\n  };\r\n\r\n  openFrame = (recordId) => {\r\n    this.setState({frameOpen: true, recordId});\r\n  };\r\n\r\n  closeFrame = () => {\r\n    this.setState({frameOpen: false, recordId: null});\r\n  };\r\n\r\n  render() {\r\n    const list = <BranchList key=\"list\" {...this.props} data={this.props.data.concat(this.props.data).concat(this.props.data).concat(this.props.data).concat(this.props.data).concat(this.props.data).concat(this.props.data)} openFrame={this.openFrame} view={VIEW}/>;\r\n\r\n    const content = this.state.frameOpen ?\r\n      (<Container fluid className=\"Interface h-100 w-100 p-0 m-0\">\r\n        <Row className=\"h-100 w-100 p-0 m-0\">\r\n          <Frame key=\"frame\" closeFrame={this.closeFrame} recordId={this.state.recordId} view={VIEW}/>\r\n          {list}\r\n        </Row>\r\n      </Container>)\r\n      :\r\n      (<div className=\"Interface frame-closed p-0 m-0 h-100\">{list}</div>);\r\n\r\n    return content;\r\n  }\r\n}\r\n","const proxyURL = 'https://cors-anywhere.herokuapp.com/';\r\nconst targetURL = 'https://megapolis.bpium.ru/api/v1';\r\nconst URL = proxyURL + targetURL;\r\n\r\nexport default async function(path, user) {\r\n  let headers = {\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n\r\n  //\r\n  if (user) headers[\"Authorization\"] = \"Basic \" + btoa(`${user.email}:${user.password}`);\r\n\r\n  let res = await fetch(URL + path, {\r\n    method: \"GET\",\r\n    headers,\r\n  });\r\n\r\n  return res;\r\n}\r\n","const proxyURL = 'https://cors-anywhere.herokuapp.com/';\r\nconst targetURL = 'https://megapolis.bpium.ru/api/v1';\r\nconst URL = proxyURL + targetURL;\r\n\r\nexport default async function (path, field, value, user) {\r\n  let headers = {\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n\r\n  if (user) headers[\"Authorization\"] = \"Basic \" + btoa(`${user.email}:${user.password}`);\r\n\r\n  const body = {\r\n    values: {},\r\n  };\r\n\r\n  body.values[field] = value;\r\n\r\n  let res = await fetch(URL + path, {\r\n    method: \"PATCH\",\r\n    headers,\r\n    body: JSON.stringify(body),\r\n  });\r\n\r\n  return res;\r\n}\r\n","import changeRecord from './changeRecord';\r\n\r\nconst maps = window.google.maps;\r\nconst geocoder = new maps.Geocoder();\r\n\r\nexport default async function (data, user) {\r\n  console.log(data);\r\n  const branches = {};\r\n  const requests = [];\r\n  data.branches.forEach((branch) => {\r\n    const id = branch.id;\r\n    const address = branch.values[6];\r\n    const coords = branch.values[20];\r\n    const applications = [];\r\n\r\n    if (coords) { // уже геокодили точку\r\n      const [lat, lng] = coords.split(',').map(a => +a);\r\n      branches[id] = {address, lat, lng, applications};\r\n      return;\r\n    }\r\n\r\n    requests.push(new Promise((resolve, reject) => { // еще нет, геокодим и записываем координаты\r\n      geocoder.geocode({'address': address, 'region': 'ru'}, async (results, status) => {\r\n        if (status === 'OK') {\r\n          const lat = results[0].geometry.location.lat();\r\n          const lng = results[0].geometry.location.lng();\r\n          const type = results[0].geometry.location_type;\r\n          if (type === 'ROOFTOP' || type === 'RANGE_INTERPOLATED') {\r\n            // успешный геокодинг\r\n            branches[id] = {address, lat, lng, applications};\r\n            const res = await changeRecord(`/catalogs/12/records/${id}`, '20', `${lat},${lng}`, user);\r\n            console.log(address, ' coords writing: ', res.status);\r\n          } else {\r\n            console.log('Incorrect address ' + address + ' skipped, id ', id);\r\n          }\r\n        } else {\r\n          console.log('Error: ', address, status);\r\n        }\r\n        resolve();\r\n      });\r\n    }));\r\n  });\r\n\r\n  await Promise.all(requests);\r\n\r\n  data.applications.forEach((application) => {\r\n    const branchId = application.values[3][0].recordId;\r\n    const status = +application.values[5][0];\r\n    const criticality = +application.values[10][0];\r\n    if (branches[branchId]) branches[branchId].applications.push({status, criticality});\r\n  });\r\n\r\n  const points = [];\r\n  for (let key in branches) {\r\n    branches[key].id = key;\r\n    points.push(branches[key]);\r\n  }\r\n\r\n  return points;\r\n}\r\n","export default function filterData(data, filter) {\r\n  // console.log(data, filter)\r\n\r\n  const filteredData = [];\r\n\r\n  data.forEach(item => {\r\n    const applications = [];\r\n\r\n    if (!item.applications.length && ~filter.criticality.indexOf('default')) {\r\n      filteredData.push(Object.assign({}, item));\r\n      return;\r\n    }\r\n\r\n    for (let key in filter) {\r\n      item.applications.forEach(app => {\r\n        // console.log(filter[key], app[key]);\r\n        if (~filter[key].indexOf(''+app[key])) applications.push(app);\r\n      });\r\n    }\r\n    // console.log(item, applications);\r\n    if (applications.length) {\r\n      item = Object.assign({}, item);\r\n      item.applications = applications;\r\n      filteredData.push(item);\r\n    }\r\n  });\r\n\r\n  return filteredData;\r\n}\r\n","import React, { Component } from 'react';\r\nimport Waiter from './Waiter';\r\nimport Auth from './Auth';\r\nimport Map from './Map';\r\nimport Interface from './Interface';\r\n\r\nimport requestData from '../actions/requestData.js';\r\nimport convertData from '../actions/convertData.js';\r\nimport filterData from '../actions/filterData.js';\r\n\r\nimport branches from '../testdata/branches.json';\r\nimport applications from '../testdata/applications.json';\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    authRequired: true,\r\n    error: false,\r\n    waiting: false,\r\n    data: null,\r\n    filteredData: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    // (async () => {\r\n    //   let data = await convertData({branches, applications});\r\n    //   console.log(data);\r\n    //   this.setState({ data, filteredData: data });\r\n    // })();\r\n\r\n    this.checkAccess();\r\n  }\r\n\r\n  exit = () => {\r\n    this.setState({\r\n      authRequired: true,\r\n      data: null,\r\n      filteredData: null,\r\n    });\r\n  };\r\n\r\n  onAuthSuccess(user) {\r\n    this.getData(user);\r\n  }\r\n\r\n  async checkAccess() {\r\n    this.setState({ waiting: true });\r\n    const res = await requestData('');\r\n    if (res.status === 404) {\r\n      this.onAuthSuccess();\r\n    } else if (res.status === 401) {\r\n      this.setState({ waiting: false });\r\n    } else {\r\n      this.onError(res);\r\n    }\r\n  }\r\n\r\n  async getData(user) {\r\n    user = Object.assign({}, user);\r\n    this.setState({ waiting: true });\r\n\r\n    const responses = {\r\n      branches: await requestData('/catalogs/12/records', user),\r\n      applications: await requestData('/catalogs/11/records', user),\r\n    };\r\n\r\n    for (let key in responses) {\r\n      if (responses[key].status === 200) responses[key] = await responses[key].json();\r\n      else {\r\n        this.onError(responses[key]);\r\n        return;\r\n      }\r\n    }\r\n\r\n    const data = await convertData(responses, user);\r\n\r\n    this.setState({ authRequired: false, data, filteredData: data, waiting: false });\r\n    console.log('data:', this.state.data);\r\n  }\r\n\r\n  onError(res) {\r\n    this.setState({ error: res });\r\n  }\r\n\r\n  filterData = (filter) => {\r\n    this.setState({\r\n      filteredData: filterData(this.state.data, filter),\r\n    }, () => console.log('filtered data:', this.state.filteredData));\r\n  };\r\n\r\n  render() {\r\n    const auth = !this.state.waiting && this.state.authRequired ? <Auth key=\"auth\" onAuthSuccess={(user) => this.onAuthSuccess(user)}/> : null;\r\n    const waiter = this.state.waiting ? <Waiter key=\"waiter\"/> : null;\r\n    const map = <Map key=\"map\" data={this.state.filteredData}/>;\r\n    const ui = this.state.filteredData ? <Interface key=\"interface\" data={this.state.filteredData} filterData={this.filterData} exit={this.exit}/> : null;\r\n\r\n    let content = [waiter, auth, ui, map];\r\n    if (this.state.error) content = <Err res={this.state.error}/>;\r\n\r\n    return content;\r\n  }\r\n}\r\n\r\nconst Err = (props) => {\r\n  return (\r\n    <div>{`${props.res.status} ${props.res.statusText}`}</div>\r\n  );\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}