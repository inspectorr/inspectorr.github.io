(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,n){t.exports=n(37)},26:function(t,e,n){},29:function(t,e,n){},33:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),s=n(19),r=n.n(s),o=n(2),l=n(3),h=n(5),c=n(4),u=n(6),d=function(){function t(e,n,a,i,s,r){Object(o.a)(this,t),this.width=e,this.height=n,this.offsetX=a,this.L=i,this.initPoints=[{x:-this.width/2,y:-this.height/2},{x:this.width/2,y:-this.height/2},{x:this.width/2,y:this.height/2},{x:-this.width/2,y:this.height/2}],this.boundAngle=Math.atan(this.width/2/this.L),this.ballBoundAngle=s,this.setAngle(r)}return Object(l.a)(t,[{key:"setAngle",value:function(t){this.phi=t,this.ballCollisionRightAngle=this.getBallCollisionRightAngle();var e=Math.sin(t)*this.L+this.offsetX,n=Math.cos(t)*this.L,a=this.initPoints.map(function(e){return{x:e.x*Math.cos(t)+e.y*Math.sin(t),y:-e.x*Math.sin(t)+e.y*Math.cos(t)}});this.position={points:a,center:{x:e,y:n}}}},{key:"getBallCollisionRightAngle",value:function(){return this.phi+this.boundAngle+this.ballBoundAngle}},{key:"pointOver",value:function(t,e){return function(t,e,n){for(var a=n.points.map(function(t){return{x:t.x+n.center.x,y:t.y+n.center.y}}),i=a.length,s=i-1,r=0,o=0;o<i;o++)(a[o].y<=e&&e<a[s].y||a[s].y<=e&&e<a[o].y)&&t>(a[s].x-a[o].x)*(e-a[o].y)/(a[s].y-a[o].y)+a[o].x&&(r=!r),s=o;return r}(t,e,this.position)}},{key:"setPosition",value:function(t,e){var n=-Math.atan2(e,t-this.offsetX)+Math.PI/2;this.setAngle(n)}},{key:"userBlock",value:function(){this.userBlocked=!0}},{key:"userUnblock",value:function(){this.userBlocked=!1}},{key:"onDragStart",value:function(){}},{key:"onDrop",value:function(){}},{key:"turnOn",value:function(){this.active=!0}},{key:"turnOff",value:function(){this.active=!1}},{key:"draw",value:function(t){var e=this.position,n=e.points,a=e.center;t.save(),t.beginPath(),t.moveTo(this.offsetX,0),t.lineTo(a.x,a.y),t.lineWidth=10,t.strokeStyle="rgb(99, 99, 99)",t.stroke(),t.beginPath(),t.moveTo(n[0].x+a.x,n[0].y+a.y);for(var i=1;i<n.length;i++)t.lineTo(n[i].x+a.x,n[i].y+a.y);var s=t.createRadialGradient(a.x,a.y,this.height/5,a.x,a.y,2*this.width);this.active?(s.addColorStop(0,"rgba(239,255,142)"),s.addColorStop(.05*Math.random(),"rgb(239,255,142)"),s.addColorStop(.4,"rgb(200, 35, 51)"),s.addColorStop(1,"rgb(200, 35, 51)")):(s.addColorStop(0,"rgb(180,180,180)"),s.addColorStop(.5,"rgb(128,128,128)"),s.addColorStop(1,"rgb(99,99,99)")),t.fillStyle=s,t.fill(),t.lineWidth=.7,t.strokeStyle="rgb(99,99,99)",t.stroke(),t.restore()}}]),t}(),f=function(){function t(e,n,a,i,s){Object(o.a)(this,t),this.v=0,this.cx=null,this.cy=null,this.R=e,this.L=n,this.omega=t.g/n,this.phi=a,this.offsetX=i,this.m=s,this.beta=1/6,this.initLeftPoint={x:-this.R,y:0},this.boundAngle=Math.atan(this.R/this.L),this.setAngle(a)}return Object(l.a)(t,[{key:"pointOver",value:function(t,e){return function(t,e,n,a,i){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-a,2))<=i}(t,e,this.cx,this.cy,this.R)}},{key:"setPosition",value:function(t,e){if(!this.userBlocked){var n=-Math.atan2(e,t-this.offsetX)+Math.PI/2;this.setAngle(n)}}},{key:"setAngle",value:function(t){this.phi=t,this.cx=Math.sin(t)*this.L+this.offsetX,this.cy=Math.cos(t)*this.L,this.leftPoint={x:this.initLeftPoint.x*Math.cos(t)+this.initLeftPoint.y*Math.sin(t)+this.cx,y:-this.initLeftPoint.x*Math.sin(t)+this.initLeftPoint.y*Math.cos(t)+this.cy}}},{key:"onDragStart",value:function(){this.physicsBlocked=!0,this.v=0}},{key:"onDrop",value:function(){this.physicsBlocked=!1}},{key:"magnetBlock",value:function(){this.v=0,this.physicsBlocked=!0,this.userBlocked=!0}},{key:"magnetUnblock",value:function(){this.physicsBlocked=!1,this.userBlocked=!1}},{key:"update",value:function(e){if(!this.physicsBlocked){var n=this.v,a=this.phi,i=this.beta,s=this.omega;this.v=n+(-2*i*n-s*Math.sin(a))*t.dt,this.phi=a+n*t.dt,this.setAngle(this.phi)}}},{key:"draw",value:function(t){t.save(),t.beginPath(),t.moveTo(this.offsetX,0),t.lineTo(this.cx,this.cy),t.lineWidth=.7,t.stroke(),t.closePath(),t.arc(this.cx,this.cy,this.R,0,2*Math.PI);var e=t.createRadialGradient(this.cx,this.cy,this.R/8,this.cx,this.cy,this.R);e.addColorStop(0,"rgb(240, 240, 240)"),e.addColorStop(.2,"rgb(235, 235, 235)"),e.addColorStop(1,"rgb(200, 200, 200)"),t.fillStyle=e,t.fill(),t.restore()}}]),t}();f.g=1500,f.dt=1/60;var g=function(){function t(e,n,a,i,s){Object(o.a)(this,t),this.cx=e,this.radius=n,this.ballRadius=a,this.leftAngle=i,this.rightAngle=s}return Object(l.a)(t,[{key:"update",value:function(t,e){this.leftAngle=t,this.rightAngle=e}},{key:"draw",value:function(t){t.save(),t.translate(this.cx,0);var e=this.radius,n=this.ballRadius;t.beginPath(),t.moveTo(-e-n,0),t.arcTo(-e-n,e,-n,e,e),t.lineTo(n,e),t.arcTo(e+n,e,n+e,0,e),t.fillStyle="rgb(242, 242, 242)",t.strokeStyle="rgb(170,170,170)",t.lineWidth=.5,t.fill(),t.stroke(),t.lineWidth=2.5,t.font="20px sans-serif",t.strokeStyle="rgba(220,53,69,0.76)",t.fillStyle="rgba(220,53,69,0.76)",t.beginPath(),this.leftAngle<0&&t.arc(-n,0,e,Math.PI/2,Math.PI/2-this.leftAngle),t.stroke(),t.fillText("".concat(m(this.leftAngle),"\xb0"),2.3*-n,e/2),t.strokeStyle="rgba(0,123,255,0.76)",t.fillStyle="rgba(0,123,255,0.76)",t.beginPath(),this.rightAngle>0&&t.arc(n,0,e,Math.PI/2,Math.PI/2-this.rightAngle,!0),t.stroke(),t.fillText("".concat(m(this.rightAngle),"\xb0"),1.5*n,e/2),t.restore()}}]),t}();function m(t){return Math.abs(Math.round(t/Math.PI*180))}n(26);var v=n(1),p=n.n(v),b=n(7),y=n.n(b),k=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(h.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(i)))).width=n.props.width,n.height=n.props.height,n.ballRadius=25,n.threadLength=340,n.magnetSide=50,n.ballBoundAngle=Math.atan(n.ballRadius/n.threadLength),n.state={balls:null,magnet:null,disk:null,clientX:null,clientY:null,dragging:!1,magnetTurnedOn:!1},n.onMouseMove=function(t){var e=n.refs.canvas.getBoundingClientRect(),a=t.clientX-e.left,i=t.clientY-e.top;n.setState({clientX:a,clientY:i})},n.onMouseDown=function(t){n.setState({mouseDown:!0})},n.onMouseUp=function(t){n.setState({mouseDown:!1})},n.dragAndDrop=function(t){if(!n.state.dragging&&!t.userBlocked){n.setState({dragging:!0});var e=function(){t.onDragStart(),t.setPosition(n.state.clientX,n.state.clientY)};n.refs.canvas.addEventListener("mousemove",e),n.refs.canvas.addEventListener("mouseup",function a(){t.onDrop(),n.refs.canvas.removeEventListener("mousemove",e),n.refs.canvas.removeEventListener("mouseup",a),n.setState({dragging:!1})})}},n.hoverOn=function(){n.refs.canvas.style.cursor="pointer"},n.hoverOff=function(){n.refs.canvas.style.cursor="unset"},n.onMagnetUserBlock=function(){n.state.magnet.userBlock()},n.onMagnetUserUnblock=function(){n.state.magnet.userUnblock()},n.onMagnetTurnOn=function(){n.state.magnet.turnOn(),n.state.magnet.userBlock(),n.setState({magnetTurnedOn:!0})},n.onMagnetTurnOff=function(){n.state.magnet.turnOff(),n.state.magnet.userUnblock(),n.state.balls[0].magnetUnblock(),n.setState({magnetTurnedOn:!1})},n.draw=function(t){n.state.balls&&n.state.magnet&&(n.ctx.clearRect(0,0,n.width,n.height),n.update(t),n.state.magnet.draw(n.ctx),n.state.balls.forEach(function(t){return t.draw(n.ctx)}),n.state.disk.draw(n.ctx),requestAnimationFrame(n.draw))},n}return Object(u.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.create(),requestAnimationFrame(this.draw)}},{key:"create",value:function(){this.ctx=this.refs.canvas.getContext("2d"),this.refs.canvas.addEventListener("mousemove",this.onMouseMove),this.refs.canvas.addEventListener("mousedown",this.onMouseDown),this.refs.canvas.addEventListener("mouseup",this.onMouseUp);var t=[new f(this.ballRadius,this.threadLength,0,this.width/2-this.ballRadius,this.props.m1),new f(this.ballRadius,this.threadLength,0,this.width/2+this.ballRadius,this.props.m2)],e=new d(this.magnetSide,this.magnetSide,this.width/2-this.ballRadius,this.threadLength,this.ballBoundAngle,-Math.PI/3),n=new g(this.width/2,this.height/6,this.ballRadius,0,0);this.setState({balls:t,magnet:e,disk:n})}},{key:"update",value:function(t){var n=this,a=this.state,i=a.clientX,s=a.clientY,r=a.mouseDown,o=this.state.balls.slice(),l=this.state,h=l.magnet,c=l.disk;e.checkBallCollision(o[0],o[1])&&e.handleBallCollision(o[0],o[1]);var u=!1;h.pointOver(i,s)&&(u=!0,r&&this.dragAndDrop(h)),this.state.magnetTurnedOn&&e.checkMagnetAndBallRightCollision(h,o[0])&&(o[0].setAngle(h.ballCollisionRightAngle),o[0].magnetBlock()),o.forEach(function(e){e.pointOver(i,s)&&(u=!0,r&&n.dragAndDrop(e)),e.update(t)}),c.update(h.ballCollisionRightAngle,o[1].phi),u?this.hoverOn():this.hoverOff(),this.setState({balls:o})}},{key:"render",value:function(){return i.a.createElement("canvas",{ref:"canvas",width:this.width,height:this.height},"HTML5 support is required to run this app")}}],[{key:"checkBallCollision",value:function(t,e){return Math.sqrt(Math.pow(t.cx-e.cx,2)+Math.pow(t.cy-e.cy,2))<=t.R+e.R}},{key:"handleBallCollision",value:function(t,e){var n=[t.m,t.v],a=n[0],i=n[1],s=[e.m,e.v],r=s[0],o=s[1],l=[((a-r)*i+2*r*o)/(a+r),((r-a)*o+2*a*i)/(a+r)];t.v=l[0],e.v=l[1]}},{key:"checkMagnetAndBallRightCollision",value:function(t,e){return t.phi+t.boundAngle>=e.phi-2*e.boundAngle}}]),e}(a.Component),M=n(11),O=n.n(M),w=(n(29),"rgba(178,212,255,0.55)"),x=function(t){function e(){return Object(o.a)(this,e),Object(h.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(y.a,{className:"Controller mx-auto align-items-center shadow-sm",style:{backgroundColor:w}},i.a.createElement(p.a,{className:"d-flex p-0 m-0 justify-content-between"},i.a.createElement(O.a,{onClick:this.props.turnOnMagnet,className:"stop btn-danger"},"\u0421\u0422\u041e\u041f"),i.a.createElement(O.a,{onClick:this.props.turnOffMagnet,className:"go"},"\u041f\u0423\u0421\u041a")))}}]),e}(a.Component),E=n(14),A=n.n(E),j=(n(33),n(15)),S=(n(35),function(t){function e(){return Object(o.a)(this,e),Object(h.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return i.a.createElement(p.a,{className:"MassInput d-flex justify-content-center"},i.a.createElement(j.a,{onSubmit:function(e){return t.props.handleMassEnter(e.m1,e.m2)},initialValues:{m1:10,m2:30}},i.a.createElement(y.a,{className:"m-1 p-0"},i.a.createElement(p.a,{className:"m-0 p-0"},"\u041c\u0430\u0441\u0441\u0430 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0448\u0430\u0440\u0438\u043a\u0430:"),i.a.createElement(p.a,{md:"auto",className:"m-0 p-0"},i.a.createElement(j.b,{field:"m1"})," \u0433")),i.a.createElement(y.a,{className:"m-1 p-0"},i.a.createElement(p.a,{className:"m-0 p-0"},"\u041c\u0430\u0441\u0441\u0430 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u0448\u0430\u0440\u0438\u043a\u0430:"),i.a.createElement(p.a,{md:"auto",className:"m-0 p-0"},i.a.createElement(j.b,{field:"m2"})," \u0433")),i.a.createElement(y.a,{className:"m-1 p-0"},i.a.createElement(O.a,{type:"submit"},"\u041d\u0410\u0427\u0410\u0422\u042c"))))}}]),e}(a.Component)),C=function(t){function e(){return Object(o.a)(this,e),Object(h.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(p.a,{className:"d-flex p-0 justify-content-center"})}}]),e}(a.Component),P=(n(36),function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(h.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(s)))).width=800,n.height=400,n.state={massEntered:!1,m1:null,m2:null},n.handleMassEnter=function(t,e){n.setState({massEntered:!0,m1:t,m2:e})},n.device=i.a.createRef(),n.onMagnetTurnOn=function(){return n.device.current.onMagnetTurnOn()},n.onMagnetTurnOff=function(){return n.device.current.onMagnetTurnOff()},n}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.state.massEntered?i.a.createElement(k,{ref:this.device,m1:+this.state.m1,m2:+this.state.m2,width:this.width,height:this.height}):i.a.createElement(S,{handleMassEnter:this.handleMassEnter});return i.a.createElement(p.a,{md:"auto",className:"DevicePanel d-flex align-items-center p-0 shadow-sm",style:{borderColor:w,width:this.width,height:this.height}},t)}}]),e}(a.Component)),R=function(t){function e(){var t,n;Object(o.a)(this,e);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(h.a)(this,(t=Object(c.a)(e)).call.apply(t,[this].concat(s)))).state={stage:0},n.devicePanel=i.a.createRef(),n.turnOnMagnet=function(){return n.devicePanel.current.onMagnetTurnOn()},n.turnOffMagnet=function(){return n.devicePanel.current.onMagnetTurnOff()},n}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(A.a,{className:"mt-3"},i.a.createElement(y.a,{className:"d-flex justify-content-center flex-nowrap"},i.a.createElement(P,{ref:this.devicePanel}),i.a.createElement(p.a,{className:"right-panel"},i.a.createElement(x,{turnOnMagnet:this.turnOnMagnet,turnOffMagnet:this.turnOffMagnet}),i.a.createElement(C,null))))}}]),e}(a.Component);r.a.render(i.a.createElement(R,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.9ea489b3.chunk.js.map